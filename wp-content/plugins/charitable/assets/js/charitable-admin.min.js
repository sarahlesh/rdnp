/*!  1.4.9 2017-01-18 11:02 */
CHARITABLE_ADMIN=window.CHARITABLE_ADMIN||{},function(a,b){if(b.fn.datepicker){var c=function(a){this.$el=a,options={dateFormat:"MM d, yy",minDate:this.$el.data("min-date")||"",beforeShow:function(a,c){b("#ui-datepicker-div").addClass("charitable-datepicker-table")}},this.$el.datepicker(options),this.$el.data("date")&&this.$el.datepicker("setDate",this.$el.data("date")),this.$el.data("min-date")&&this.$el.datepicker("option","minDate",this.$el.data("min-date"))};a.Datepicker=c}}(CHARITABLE_ADMIN,jQuery),function(a,b){var c=function(a){var c=[],d=function(a,b){var c=a.parents("tr").first(),d=a.data("show-only-if-value"),e=function(){return"checked"===d?b.is(":checked"):"selected"===d?b.selected():b.val()===d}();e?c.show():c.hide()};this.$el=a,this.$el.find("[data-show-only-if-key]").each(function(){var a=b(this),d="#"+a.data("show-only-if-key");"undefined"==typeof c[d]&&(c[d]=[]),c[d].push(a)});for(trigger in c){var e=b(trigger);c.hasOwnProperty(trigger)&&e.on("change",function(){c[trigger];for(setting_key in c[trigger])c[trigger].hasOwnProperty(setting_key)&&d(c[trigger][setting_key],e)}).change()}};a.Settings=c}(CHARITABLE_ADMIN,jQuery),function(a){var b=function(){a("[data-charitable-action]").on("click",function(b){var c=a(this).data("charitable-args")||{},d="charitable-"+a(this).data("charitable-action");return a.post(ajaxurl,{action:d,data:c},function(a){console.log("Response: "+a)}),!1})},c=function(){a("[data-charitable-toggle]").on("click",function(b){var c=a(this).data("charitable-toggle"),d=a(this).attr("data-charitable-toggle-text");return d&&d.length&&(a(this).attr("data-charitable-toggle-text",a(this).text()),a(this).text(d)),a("#"+c).toggle(),!1})},d=function(){var b=a("#charitable-campaign-advanced-metabox");b.tabs();var c=b.find(".charitable-tabs").height();b.find(".ui-tabs-panel").each(function(){a(this).css("min-height",c)})},e=function(){var b=a("#campaign_allow_custom_donations"),c=a(".charitable-campaign-suggested-donations tbody tr:not(.to-copy)"),d=c.length>1||!1===c.first().hasClass("no-suggested-amounts");b.attr("disabled",!d),d||b.prop("checked",!0)},f=function(){a(".charitable-campaign-suggested-donations tbody").sortable({items:"tr:not(.to-copy)",handle:".handle",stop:function(a,b){i()}})},g=function(a){var b=a.closest(".charitable-campaign-suggested-donations").find("tbody"),c=b.find("tr.to-copy").clone().removeClass("to-copy hidden");b.find(".no-suggested-amounts").hide(),b.append(c),i(),e()},h=function(a){console.log(a),a.closest("tr").remove();var b=a.closest(".charitable-campaign-suggested-donations").find("tbody");1==b.find("tr:not(.to-copy)").length&&b.find(".no-suggested-amounts").removeClass("hidden").show(),i(),e()},i=function(){a(".charitable-campaign-suggested-donations tbody").each(function(){a(this).children("tr").not(".no-suggested-amounts .to-copy").each(function(b){a(this).data("index",b),a(this).find("input").each(function(a){this.name=this.name.replace(/(\[\d\])/,"["+b+"]")})})})},j=function(){var b=a("#charitable_dashboard_donations");b.length&&a.ajax({type:"GET",data:{action:"charitable_load_dashboard_donations_widget"},url:ajaxurl,success:function(a){b.find(".inside").html(a)}})};a(document).ready(function(){CHARITABLE_ADMIN.Datepicker&&a(".charitable-datepicker").each(function(){CHARITABLE_ADMIN.Datepicker(a(this))}),a("#charitable-settings").each(function(){CHARITABLE_ADMIN.Settings(a(this))}),a("body.post-type-campaign .handlediv, body.post-type-donation .handlediv").remove(),a("body.post-type-campaign .hndle, body.post-type-donation .hndle").removeClass("hndle ui-sortable-handle").addClass("postbox-title"),d(),f(),e(),b(),c(),j(),a("[data-charitable-add-row]").on("click",function(){var b=a(this).data("charitable-add-row");return"suggested-amount"===b&&g(a(this)),!1}),a(".charitable-campaign-suggested-donations").on("click",".charitable-delete-row",function(){return console.log("clicked"),h(a(this)),!1}),a("body").on("click","[data-campaign-benefactor-delete]",function(){var b=a(this).parents(".charitable-benefactor"),c={action:"charitable_delete_benefactor",benefactor_id:a(this).data("campaign-benefactor-delete"),nonce:a(this).data("nonce")};return a.ajax({type:"POST",data:c,dataType:"json",url:ajaxurl,xhrFields:{withCredentials:!0},success:function(a){a.deleted&&b.remove()}}).fail(function(a){window.console&&window.console.log&&(console.log("failture"),console.log(a))}),!1}),a("#change-donation-status").on("change",function(){a(this).parents("form").submit()})})}(jQuery);